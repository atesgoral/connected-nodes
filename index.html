<style>
html, body {
  height: 100%;
}
body {
  margin: 0;
  padding: 0;
  background: -webkit-gradient(linear, right top, left bottom, from(#3bbdec), to(#00aae7));
}
canvas {
  width: 100%;
  height: 100%;
}
#text {
  position: absolute;
  top: 50%;
  margin-top: -24pt;
  width: 100%;
  text-align: center;
  color: #fff;
  font-family: Helvetica, sans-serif;
  font-size: 48pt;
}
#overlay {
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  background: url(Header.png) 50% 50% no-repeat;
  background-size: 40%;
}
</style>
<canvas>
</canvas>
<div id="overlay"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5.1/dat.gui.min.js"></script>
<script src="nodes.js"></script>
<script>
window.onload = function () {
  var config = {
    nodeColor: '#d8f02a',
    nodeOpacity: 1,
    nodeFade: 500,
    nodeMinRadius: 2,
    nodeMaxRadius: 2,
    nodeMinVelocity: 0.15, // per frame, not time based!
    nodeMaxVelocity: 0.15, // per frame, not time based!

    wavesEnabled: true,
    waveColor: '#fff',
    waveOpacity: 1,
    waveMinWait: 0,
    waveMaxWait: 40000,
    waveDuration: 2500,
    waveMaxDistance: 30,
    waveMinCount: 1,
    waveMaxCount: 3,

    connsEnabled: true,
    connColor: '#fff',
    connOpacity: 0.19,
    connFade: 4000,
    connMinDistance: 0,
    connMaxDistance: 200,
    connMaxPerNode: 5,

    spawnSteps: [{
      d: 3000,
      r: 0.25,
      n: 10
    }, {
      d: 1000,
      r: .5,
      n: 50
    }, {
      d: 1000,
      r: 1,
      n: 100
    }]
  };

  var canvas = document.getElementsByTagName('canvas')[0];
  var nodes = new Nodes(canvas, config);
  var gui = new dat.GUI({
    width: 300
  });

  gui.remember(config);

  gui.add(nodes, 'restart');

  var nodeProps = gui.addFolder('Nodes');
  nodeProps.open();
  nodeProps.addColor(config, 'nodeColor');
  nodeProps.add(config, 'nodeOpacity', 0, 1);
  nodeProps.add(config, 'nodeFade', 0, 10000).step(250);
  nodeProps.add(config, 'nodeMinRadius', 0, 10).step(1);
  nodeProps.add(config, 'nodeMaxRadius', 0, 10).step(1);
  nodeProps.add(config, 'nodeMinVelocity', 0, 2);
  nodeProps.add(config, 'nodeMaxVelocity', 0, 2);

  var waveProps = gui.addFolder('Waves');
  waveProps.open();
  waveProps.add(config, 'wavesEnabled');
  waveProps.addColor(config, 'waveColor');
  waveProps.add(config, 'waveOpacity', 0, 1);
  waveProps.add(config, 'waveMinWait', 0, 60000).step(250);
  waveProps.add(config, 'waveMaxWait', 0, 60000).step(250);
  waveProps.add(config, 'waveDuration', 0, 10000).step(250);
  waveProps.add(config, 'waveMaxDistance', 0, 200).step(1);
  waveProps.add(config, 'waveMinCount', 1, 10).step(1);
  waveProps.add(config, 'waveMaxCount', 1, 10).step(1);

  var connProps = gui.addFolder('Connections');
  connProps.open();
  connProps.add(config, 'connsEnabled');
  connProps.addColor(config, 'connColor');
  connProps.add(config, 'connOpacity', 0, 1);
  connProps.add(config, 'connFade', 0, 10000).step(250);
  connProps.add(config, 'connMinDistance', 0, 2000).step(1);
  connProps.add(config, 'connMaxDistance', 0, 2000).step(1);
  connProps.add(config, 'connMaxPerNode', 0, 100).step(1);

  document.getElementsByClassName('save-row')[0].appendChild(restartButton);
};
</script>
